@model Common.Model.BorrowerWithUser
@{
    ViewBag.Title = "GetAcountInfo";
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            @Model.Borrower.FirstName @Model.Borrower.LastName           
        </h1>
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <h4>Dina kontouppgifter</h4>
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            
            @Html.HiddenFor(m => m.User.PersonId)
            @Html.HiddenFor(m => m.User.RoleId)
            @Html.HiddenFor(m => m.Borrower.PersonId)
            @Html.HiddenFor(m => m.Borrower.CategoryId)
            <div class="form-group">
                <label>Personnummer</label>
                @Html.EditorFor(m => m.Borrower.PersonId, new { htmlAttributes = new { @class = "form-control", @disabled = "disabled"} })
                @Html.ValidationMessageFor(m => m.Borrower.PersonId, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Förnamn</label>
                @Html.EditorFor(m => m.Borrower.FirstName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(m => m.Borrower.FirstName, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Efternamn</label>
                @Html.EditorFor(m => m.Borrower.LastName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(m => m.Borrower.LastName, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Adress</label>
                @Html.EditorFor(m => m.Borrower.Address, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(m => m.Borrower.Address, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Telefonnummer</label>
                @Html.EditorFor(m => m.Borrower.Telno, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(m => m.Borrower.Telno, "", new { @class = "text-danger" })
            </div>           
            <div class="form-group">
                <label>Email</label>
                @Html.EditorFor(m => m.User.Email, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(m => m.User.Email, "", new { @class = "text-danger" })
            </div>   
            <div class="form-group">
                <label>Nuvarande lösenord</label>
                @Html.PasswordFor(m => m.User.Password, new { @class = "form-control" })
                @Html.ValidationMessageFor(m => m.User.Password, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Nytt lösenord</label>
                <small>Lämna tomt om du inte vill ändra</small>
                <input type="password" name="newPassword" class="form-control" />
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-warning" value="Uppdatera" />                
            </div>
        }

        @if (ViewBag.Error != null)
        {//Denna visas alltid! måste gå att ta bort!
            <div class="alert alert-danger">
                @ViewBag.Error
            </div>
        }
</div>
